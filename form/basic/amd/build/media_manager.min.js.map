{"version":3,"file":"media_manager.min.js","sources":["../src/media_manager.js"],"sourcesContent":["/*\n * Plenary meeting Basic media manager\n *\n * @package    plenumform_basic\n * @module     plenumform_basic/media_manager\n * @copyright  2023 Daniel Thies\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport Ajax from \"core/ajax\";\nimport Templates from \"core/templates\";\nimport Notification from \"core/notification\";\n\nexport default class MediaManager {\n    /**\n     * Initialize player plugin\n     *\n     * @param {int} contextid\n     * @param {int} delay\n     *\n     * @returns {bool}\n     */\n    constructor(contextid, delay) {\n        this.contextid = contextid;\n\n        if (!delay) {\n            return false;\n        }\n\n        setInterval(() => {\n            this.updateMotions(contextid);\n        }, delay);\n\n        return true;\n    }\n\n    async updateMotions(contextid) {\n        const selector = `[data-contextid=\"${contextid}\"][data-region=\"plenum-motions\"]`;\n        const content = document.querySelector(selector);\n        if (content) {\n            const response = await Ajax.call([{\n                args: {\n                    contextid: contextid\n                },\n                contextid: contextid,\n                fail: Notification.exception,\n                methodname: 'mod_plenum_update_content'\n            }])[0];\n            if (response.motions) {\n                Templates.replaceNodeContents(content, response.motions, response.javascript);\n            }\n        }\n    }\n}\n"],"names":["constructor","contextid","delay","setInterval","updateMotions","selector","content","document","querySelector","response","Ajax","call","args","fail","Notification","exception","methodname","motions","replaceNodeContents","javascript"],"mappings":";;;;;;;;yPAsBIA,YAAYC,UAAWC,mBACdD,UAAYA,YAEZC,QAILC,aAAY,UACHC,cAAcH,aACpBC,QAEI,uBAGSD,iBACVI,SAAY,oBAAmBJ,4CAC/BK,QAAUC,SAASC,cAAcH,aACnCC,QAAS,OACHG,eAAiBC,cAAKC,KAAK,CAAC,CAC9BC,KAAM,CACFX,UAAWA,WAEfA,UAAWA,UACXY,KAAMC,sBAAaC,UACnBC,WAAY,+BACZ,GACAP,SAASQ,4BACCC,oBAAoBZ,QAASG,SAASQ,QAASR,SAASU"}